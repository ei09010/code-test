<!DOCTYPE html>
<html>
  <head>
    <title>Bootstrap 101 Template</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <!-- Latest compiled and minified CSS -->
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

      <!-- Optional theme -->
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
      
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
      <style type="text/css">
body {
  padding-top: 40px;
  padding-bottom: 40px;
  background-color: #eee;
}

.form-details {
  max-width: 330px;
  padding: 15px;
  margin: 0 auto;
}
.form-details .form-details-heading,
.form-details .checkbox {
  margin-bottom: 10px;
}
.form-details .checkbox {
  font-weight: normal;
}
.form-details .form-control {
  position: relative;
  height: auto;
  padding: 10px;
  font-size: 16px;
}
.form-details .form-control:focus {
  z-index: 2;
}
      </style>
  </head>
  <body>

    <div class="container">

      <form class="form-details" method="post">

        <h2 class="form-details-heading">Details</h2>

        <label for="inputEmail" class="sr-only">Email address</label>
        <input type="email" id="inputEmail" class="form-control" 
        placeholder="Email address" required autofocus>

        <label for="inputCardNumber" class="sr-only">Card Number</label>
        <input type="text" id="inputCardNumber" class="form-control" 
        placeholder="Card Number" required>

        <label for="inputCVV" class="sr-only">CVV</label>
        <input type="text" id="inputCVV" class="form-control" 
        placeholder="Security Code" required>

        <div class="checkbox">
          <label>
            <input type="checkbox" value="agree"> Agree to Terms
          </label>
        </div>

        <button class="btn btn-lg btn-primary btn-block" type="submit" >Submit</button>
      </form>

    </div> <!-- /container -->

    <script>

          $(window).on('load', createSession())

          function getCookie(cookieName){
  var cookieArray = document.cookie.split(';');
  for(var i=0; i<cookieArray.length; i++){
    var cookie = cookieArray[i];
    while (cookie.charAt(0)==' '){
      cookie = cookie.substring(1);
    }
    cookieHalves = cookie.split('=');
    if(cookieHalves[0]== cookieName){
      return cookieHalves[1];
    }
  }
  return "";
}


    function createSession(){
        var xhr = new XMLHttpRequest();
        var data = {}
        var webSiteUrl = document.URL;
        
        data["websiteUrl"] = webSiteUrl
        
        var request = JSON.stringify(data)
        xhr.open('POST', 'http://localhost:8080/session', true);
        // xhr.setRequestHeader("Access-Control-Allow-Origin", "*");
        // xhr.setRequestHeader("Access-Control-Allow-Methods", " GET, POST");

        xhr.send(request)

        var x = xhr.getResponseHeader('Set-Cookie')
        alert(x);
    }

    function postInfoServer() {

    }

      // var formUser = document.querySelector('#form-create-user');
      // var username = document.querySelector('#username');
      // var p1 = document.querySelector('#password');
      // var p2 = document.querySelector('#password2');
  
      // var nameErr = document.querySelector('#username-err');
      // var pErr = document.querySelector('#password-err');
  
      // //    username must be unique
      // username.addEventListener('input', function(){
      //     console.log(username.value);
      //     var xhr = new XMLHttpRequest();
      //     xhr.open('POST', '/checkUserName', true);
      //     xhr.addEventListener('readystatechange', function(){
      //         if(xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200){
      //             var item = xhr.responseText;
      //             console.log(item);
      //             if (item == 'true') {
      //                 nameErr.textContent = 'Username taken - Try another name!';
      //                 document.querySelector('#submitbutton').disabled = true;
      //             } else {
      //                 nameErr.textContent = '';
      //                 document.querySelector('#submitbutton').disabled = false;
      //             }
      //         }
      //     });
      //     xhr.send(username.value);
      // });
  
      // //    Validate passwords
      // //    listen for submit button click
      // formUser.addEventListener('submit', function(e){
      //     var ok = validatePasswords();
      //     if (!ok) {
      //         e.preventDefault();
      //         return;
      //     }
      // });
  
      // function validatePasswords() {
      //     pErr.textContent = '';
      //     if (p1.value === '') {
      //         pErr.textContent = 'Enter a password.';
      //         return false;
      //     }
      //     if (p1.value !== p2.value) {
      //         pErr.textContent = 'Your passwords did not match. Please re-enter your passwords.';
      //         p1.value = '';
      //         p2.value = '';
      //         return false;
      //     }
      //     return true;
      // };
  </script>



  </body>
</html>